(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7652:function(e,r,t){Promise.resolve().then(t.bind(t,8836))},9079:function(e,r,t){"use strict";var n,s;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(3127)},3127:function(e){"use strict";!function(){var r={229:function(e){var r,t,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{t="function"==typeof clearTimeout?clearTimeout:a}catch(e){t=a}}();var i=[],u=!1,c=-1;function d(){u&&n&&(u=!1,n.length?i=n.concat(i):c=-1,i.length&&m())}function m(){if(!u){var e=l(d);u=!0;for(var r=i.length;r;){for(n=i,i=[];++c<r;)n&&n[c].run();c=-1,r=i.length}n=null,u=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function f(e,r){this.fun=e,this.array=r}function h(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];i.push(new f(e,r)),1!==i.length||u||l(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}},a=!0;try{r[e](o,o.exports,n),a=!1}finally{a&&delete t[e]}return o.exports}n.ab="//";var s=n(229);e.exports=s}()},8836:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var n=t(3827),s=t(4090),o=t(9079);function a(e){let r=e.trim().replace(/\s+/g,"").replace(/,/g,".").replace(/[^\d.]/g,"");if(!r)return null;let t=Number(r);return Number.isFinite(t)?t:null}function l(e){return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function i(){var e;let[r,t]=(0,s.useState)("pay"),[i,u]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[m,f]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),p=o.env.NEXT_PUBLIC_USDT_TRC20_WALLET||"TXgKoMQhFe5M86MPYNsE7w9X196LmD6VDp";(0,s.useEffect)(()=>{let e=!1;return(async()=>{try{var r;x(null);let t=o.env.NEXT_PUBLIC_OPENEXCHANGERATES_APP_ID||"378296b319274d21b6a764c50e406da7",n=await fetch("https://openexchangerates.org/api/latest.json?app_id=".concat(encodeURIComponent(t),"&symbols=RUB"),{cache:"no-store"});if(!n.ok)throw Error(String(n.status));let s=await n.json(),a=null===(r=s.rates)||void 0===r?void 0:r.RUB;if("number"!=typeof a||!Number.isFinite(a)||a<=0)throw Error("Invalid RUB rate");e||f({usdRub:a,usdtRub:a,updatedAt:new Date().toISOString()})}catch(r){e||x("Не удалось загрузить курс. Проверьте настройки.")}})(),()=>{e=!0}},[]);let b=(0,s.useMemo)(()=>{if(!m)return{error:"Загружаем курс…"};if("pay"===r){let e=a(i);if(null==e)return{error:null};if(e<=0)return{error:"Сумма должна быть больше 0."};if(e>1e4)return{error:"Максимум 10 000 USDT (в эквиваленте)."};let r=e<100?1.25:e<=600?1.2:1.15;return{error:null,rubToPay:Math.round(e*m.usdRub*r),commissionRate:r}}let e=a(c);if(null==e)return{error:null};if(e<=0)return{error:"Сумма должна быть больше 0."};let t=e/m.usdtRub;if(t>1e4)return{error:"Максимум 10 000 USDT (в эквиваленте)."};let n=t/.9,s=n*m.usdtRub;return{error:null,usdtToPay:n,rubWithCommission:Math.round(s)}},[r,m,i,c]),v=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){}},g="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold px-4 py-2 rounded-lg transition-colors",y="bg-emerald-50 hover:bg-emerald-100 text-emerald-800 font-semibold px-4 py-2 rounded-lg transition-colors border border-emerald-200";return(0,n.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-10",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Калькулятор суммы"}),(null==m?void 0:m.updatedAt)&&(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Курс обновлён: ",new Date(m.updatedAt).toLocaleString("ru-RU")]}),h&&(0,n.jsx)("p",{className:"text-sm text-red-600 mt-2",children:h})]}),(0,n.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-4 sm:p-6 shadow-sm",children:[(0,n.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,n.jsx)("button",{className:"pay"===r?g:y,onClick:()=>t("pay"),children:"Оплата"}),(0,n.jsx)("button",{className:"receive"===r?g:y,onClick:()=>t("receive"),children:"Прием платежей"})]}),"pay"===r?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Сумма в USD"}),(0,n.jsx)("input",{value:i,onChange:e=>u(e.target.value),inputMode:"decimal",placeholder:"Например: 120",className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-200"})]}),(null==b?void 0:b.error)&&(0,n.jsx)("div",{className:"text-sm text-red-600",children:b.error}),"rubToPay"in b&&null!=b.rubToPay&&(0,n.jsx)("div",{className:"rounded-xl bg-emerald-50 border border-emerald-100 p-4",children:(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:["К оплате: ",(0,n.jsxs)("span",{className:"font-bold",children:[(e=b.rubToPay,new Intl.NumberFormat("ru-RU").format(Math.round(e)))," ₽"]})]})})]}):(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Сумма в RUB"}),(0,n.jsx)("input",{value:c,onChange:e=>d(e.target.value),inputMode:"decimal",placeholder:"Например: 49 900",className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-200"})]}),(null==b?void 0:b.error)&&(0,n.jsx)("div",{className:"text-sm text-red-600",children:b.error}),"usdtToPay"in b&&null!=b.usdtToPay&&(0,n.jsxs)("div",{className:"rounded-xl bg-emerald-50 border border-emerald-100 p-4 space-y-3",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:["К оплате"," ",(0,n.jsxs)("span",{className:"font-bold",children:[l(b.usdtToPay)," USDT"]})," "]}),(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:["Адрес для оплаты (USDT TRC20):"," ",(0,n.jsx)("span",{className:"font-mono break-all",children:p})]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,n.jsx)("button",{className:g,onClick:()=>v("К оплате ".concat(l(b.usdtToPay)," USDT\nАдрес для оплаты (USDT TRC20): ").concat(p)),children:"Скопировать"})}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Только сеть TRC20."})]})]})]})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=7652)}),_N_E=e.O()}]);